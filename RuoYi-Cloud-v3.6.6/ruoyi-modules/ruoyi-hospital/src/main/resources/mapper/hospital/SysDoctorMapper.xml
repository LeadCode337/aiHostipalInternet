<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.hospital.mapper.SysDoctorMapper">
    
    <resultMap type="SysDoctor" id="SysDoctorResult">
        <result property="id"    column="id"    />
        <result property="employeeId"    column="employee_id"    />
        <result property="name"    column="name"    />
        <result property="password"    column="password"    />
        <result property="avatar"    column="avatar"    />
        <result property="phone"    column="phone"    />
        <result property="deptId"    column="dept_id"    />
        <result property="jobTitleId"    column="job_title_id"    />
        <result property="licenseUrl"    column="license_url"    />
        <result property="joinDate"    column="join_date"    />
        <result property="status"    column="status"    />
        <result property="isDeleted"    column="is_deleted"    />
        <result property="idCard"    column="id_card"    />
        <result property="idCardUrl"    column="id_card_url"    />
        <result property="specialty"    column="specialty"    />
        <result property="introduction"    column="introduction"    />
        <result property="rating"    column="rating"    />
        <result property="consultCount"    column="consult_count"    />
        <result property="salary"    column="salary"    />
    </resultMap>

    <sql id="selectSysDoctorVo">
        select id, employee_id, name, password, avatar, phone, dept_id, job_title_id, license_url, join_date, status, is_deleted, id_card, id_card_url, specialty, introduction, rating, consult_count, salary from sys_doctor
    </sql>

    <select id="selectSysDoctorList" parameterType="SysDoctor" resultMap="SysDoctorResult">
        <include refid="selectSysDoctorVo"/>
        <where>  
            <if test="employeeId != null "> and employee_id = #{employeeId}</if>
            <if test="name != null  and name != ''"> and name like concat('%', #{name}, '%')</if>
            <if test="jobTitleId != null "> and job_title_id = #{jobTitleId}</if>
        </where>
    </select>
    
    <select id="selectSysDoctorById" parameterType="Long" resultMap="SysDoctorResult">
        <include refid="selectSysDoctorVo"/>
        where id = #{id}
    </select>

    <insert id="insertSysDoctor" parameterType="SysDoctor" useGeneratedKeys="true" keyProperty="id">
        insert into sys_doctor
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="employeeId != null">employee_id,</if>
            <if test="name != null and name != ''">name,</if>
            <if test="password != null">password,</if>
            <if test="avatar != null and avatar != ''">avatar,</if>
            <if test="phone != null and phone != ''">phone,</if>
            <if test="deptId != null">dept_id,</if>
            <if test="jobTitleId != null">job_title_id,</if>
            <if test="licenseUrl != null and licenseUrl != ''">license_url,</if>
            <if test="joinDate != null">join_date,</if>
            <if test="status != null and status != ''">status,</if>
            <if test="isDeleted != null">is_deleted,</if>
            <if test="idCard != null and idCard != ''">id_card,</if>
            <if test="idCardUrl != null and idCardUrl != ''">id_card_url,</if>
            <if test="specialty != null and specialty != ''">specialty,</if>
            <if test="introduction != null and introduction != ''">introduction,</if>
            <if test="rating != null">rating,</if>
            <if test="consultCount != null">consult_count,</if>
            <if test="salary != null">salary,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="employeeId != null">#{employeeId},</if>
            <if test="name != null and name != ''">#{name},</if>
            <if test="password != null">#{password},</if>
            <if test="avatar != null and avatar != ''">#{avatar},</if>
            <if test="phone != null and phone != ''">#{phone},</if>
            <if test="deptId != null">#{deptId},</if>
            <if test="jobTitleId != null">#{jobTitleId},</if>
            <if test="licenseUrl != null and licenseUrl != ''">#{licenseUrl},</if>
            <if test="joinDate != null">#{joinDate},</if>
            <if test="status != null and status != ''">#{status},</if>
            <if test="isDeleted != null">#{isDeleted},</if>
            <if test="idCard != null and idCard != ''">#{idCard},</if>
            <if test="idCardUrl != null and idCardUrl != ''">#{idCardUrl},</if>
            <if test="specialty != null and specialty != ''">#{specialty},</if>
            <if test="introduction != null and introduction != ''">#{introduction},</if>
            <if test="rating != null">#{rating},</if>
            <if test="consultCount != null">#{consultCount},</if>
            <if test="salary != null">#{salary},</if>
         </trim>
    </insert>

    <update id="updateSysDoctor" parameterType="SysDoctor">
        update sys_doctor
        <trim prefix="SET" suffixOverrides=",">
            <if test="employeeId != null">employee_id = #{employeeId},</if>
            <if test="name != null and name != ''">name = #{name},</if>
            <if test="password != null">password = #{password},</if>
            <if test="avatar != null and avatar != ''">avatar = #{avatar},</if>
            <if test="phone != null and phone != ''">phone = #{phone},</if>
            <if test="deptId != null">dept_id = #{deptId},</if>
            <if test="jobTitleId != null">job_title_id = #{jobTitleId},</if>
            <if test="licenseUrl != null and licenseUrl != ''">license_url = #{licenseUrl},</if>
            <if test="joinDate != null">join_date = #{joinDate},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="isDeleted != null">is_deleted = #{isDeleted},</if>
            <if test="idCard != null and idCard != ''">id_card = #{idCard},</if>
            <if test="idCardUrl != null and idCardUrl != ''">id_card_url = #{idCardUrl},</if>
            <if test="specialty != null and specialty != ''">specialty = #{specialty},</if>
            <if test="introduction != null and introduction != ''">introduction = #{introduction},</if>
            <if test="rating != null">rating = #{rating},</if>
            <if test="consultCount != null">consult_count = #{consultCount},</if>
            <if test="salary != null">salary = #{salary},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteSysDoctorById" parameterType="Long">
        delete from sys_doctor where id = #{id}
    </delete>

    <delete id="deleteSysDoctorByIds" parameterType="String">
        delete from sys_doctor where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>